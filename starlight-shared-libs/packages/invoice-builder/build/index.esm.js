import e,{useState as t,useEffect as l}from"react";import{addDays as n,format as a}from"date-fns";const r=e=>`${(e=>{const t=e.addressLine2?", "+e.addressLine2:"";return`${e.addressLine1}${t}`})(e)}, ${e.city}, ${e.state}, ${e.zip}`,s=e=>Object.keys(e).some(t=>e[t]),c={style:"currency",currency:"USD",minimumFractionDigits:0},m=new Intl.NumberFormat("en-US",c),i=(e=0,t=0)=>0!==t?new Intl.NumberFormat("en-US",{...c,minimumFractionDigits:t}).format(e):m.format(e);function d(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===l&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var o="styles_divider__2X7pQ",u="styles_heading__17r3L",_="styles_spaceBottom__HK6iQ",E="styles_wrapper__doN-s",y="styles_preview__SLUS4",p="styles_header__ucTJd",h="styles_logo__Yk0-A",N="styles_generalInformation__1iM3E",g="styles_table__3VGmS",v="styles_textRight__1kuXN",b="styles_summary__3stoU",x="styles_label__DqcDc",f="styles_total__3XMmf";d('@import url("https://fonts.googleapis.com/css?family=Roboto:400,500,700,900&display=swap");\n.styles_divider__2X7pQ {\n  border-bottom: 1px solid #dfe3e8;\n  grid-column: 1/-1;\n}\n\n.styles_heading__17r3L {\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n.styles_spaceBottom__HK6iQ {\n  margin-bottom: 8px;\n}\n\n.styles_wrapper__doN-s {\n  color: #212b36;\n  padding: 8px;\n  line-height: 16px;\n  background: white;\n  font-family: Roboto, Arial, Helvetica, sans-serif;\n  font-size: 14px;\n}\n.styles_wrapper__doN-s.styles_preview__SLUS4 {\n  font-size: 10px;\n}\n.styles_wrapper__doN-s .styles_row___rfGi {\n  display: flex;\n  justify-content: space-between;\n}\n.styles_wrapper__doN-s .styles_row___rfGi:not(:last-child) {\n  margin-bottom: 8px;\n}\n.styles_wrapper__doN-s .styles_header__ucTJd {\n  display: flex;\n  width: 50%;\n  line-height: 1.6;\n}\n.styles_wrapper__doN-s .styles_logo__Yk0-A {\n  height: 80px;\n  width: 80px;\n  object-fit: contain;\n  border-radius: 50%;\n  margin-right: 32px;\n}\n.styles_wrapper__doN-s .styles_logo__Yk0-A.styles_preview__SLUS4 {\n  height: 50px;\n  width: 50px;\n}\n.styles_wrapper__doN-s .styles_generalInformation__1iM3E {\n  margin: 50px 0 20px 0;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS {\n  border-collapse: collapse;\n  width: 100%;\n  table-layout: fixed;\n  padding: 8px;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS tr {\n  page-break-inside: avoid;\n  page-break-after: auto;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS th {\n  background: #dfe3e8;\n  color: rgba(33, 43, 54, 0.6);\n  height: 36px;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS td, .styles_wrapper__doN-s .styles_table__3VGmS th {\n  padding: 0 8px;\n  line-height: 2;\n  text-align: left;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS td.styles_textRight__1kuXN, .styles_wrapper__doN-s .styles_table__3VGmS th.styles_textRight__1kuXN {\n  text-align: right;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS tr:first-child td {\n  padding-top: 8px;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS tr.styles_divider__2X7pQ td {\n  border-bottom: 1px solid #dfe3e8;\n  padding-bottom: 8px;\n}\n.styles_wrapper__doN-s .styles_table__3VGmS tr.styles_divider__2X7pQ + tr td {\n  padding-top: 8px;\n}\n.styles_wrapper__doN-s .styles_summary__3stoU {\n  margin-left: auto;\n  width: 30%;\n  margin-top: 18px;\n  margin-right: 12px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  text-align: right;\n  gap: 8px;\n}\n.styles_wrapper__doN-s .styles_summary__3stoU .styles_label__DqcDc {\n  text-align: left;\n}\n.styles_wrapper__doN-s .styles_summary__3stoU .styles_total__3XMmf {\n  font-size: 16px;\n  font-weight: bold;\n}\n.styles_wrapper__doN-s .styles_summary__3stoU .styles_total__3XMmf.styles_preview__SLUS4 {\n  font-size: 12px;\n}');var w="styles_invoiceInformation__2NmhE",T="styles_label__2xvBm";d(".styles_invoiceInformation__2NmhE {\n  grid-column: 3/4;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  text-align: right;\n}\n.styles_invoiceInformation__2NmhE .styles_label__2xvBm {\n  font-weight: bold;\n  text-align: left;\n}");const M=({logoUrl:t,physicalAddress:l,customer:c,orders:m,invoiceNumber:d,payments:_,preview:M=!1})=>{const D=m.reduce((e,t)=>e+(t.grandTotal-t.beforeTaxesTotal-t.surchargesTotal),0),S=m.reduce((e,t)=>e+t.surchargesTotal,0),$=m.reduce((e,t)=>e+t.beforeTaxesTotal,0),F=""+(M?y:"");return e.createElement("div",{className:`${E} ${F}`},e.createElement("div",{className:p},t?e.createElement("img",{src:t,alt:"logo",className:`${h} ${F}`}):null,l&&s(l)?r(l):null),e.createElement("div",{className:N},e.createElement("div",null,e.createElement("div",{className:u},"Bill to"),r(c.billingAddress)),"byCustomer"!==c.invoiceConstruction&&m[0]?e.createElement("div",null,e.createElement("div",{className:u},"Job Site"),r(m[0].jobSite)):null,e.createElement("div",{className:w},d?e.createElement(e.Fragment,null,e.createElement("div",{className:T},"Invoice #"),e.createElement("div",null,d)):null,e.createElement("div",{className:T},"Invoice Date"),e.createElement("div",null,a(new Date,"dd MMM, yyyy")),e.createElement("div",{className:T},"Due Date"),e.createElement("div",null,a(c.paymentTerms?(e=>{const t=new Date;switch(e){case"cod":return t;case"net15Days":return n(t,15);case"net30Days":return n(t,30);case"net60Days":return n(t,60)}})(c.paymentTerms):new Date,"dd MMM, yyyy")),c.paymentTerms?e.createElement(e.Fragment,null,e.createElement("div",{className:T},"Payment Terms"),e.createElement("div",null,(e=>{switch(e){case"cod":return"COD";case"net15Days":return"Net 15";case"net30Days":return"Net 30";case"net60Days":return"Net 60"}})(c.paymentTerms))):null)),e.createElement("table",{className:g},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Order#"),e.createElement("th",null,"PO#"),e.createElement("th",null,"WO#"),e.createElement("th",null,"Date#"),e.createElement("th",null,"Service"),e.createElement("th",null,"Ticket"),e.createElement("th",null,"Rate"),e.createElement("th",null,"Qty"),e.createElement("th",null,"Amount"),e.createElement("th",{className:v},"Total"))),e.createElement("tbody",null,m.map(t=>e.createElement(e.Fragment,{key:t.id},t.services.map((l,n)=>0===n?e.createElement("tr",{key:n},e.createElement("td",null,t.id),e.createElement("td",null,t.poNumber),e.createElement("td",null,t.woNumber),e.createElement("td",null,a(t.serviceDate,"dd MMM, yyyy")),e.createElement("td",null,l.description),e.createElement("td",null,t.ticket),e.createElement("td",null,l.price.toFixed(2)),e.createElement("td",null,l.quantity),e.createElement("td",null,(l.price*l.quantity).toFixed(2)),e.createElement("td",{className:v},t.beforeTaxesTotal.toFixed(2))):e.createElement("tr",{key:n},e.createElement("td",null),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,l.description),e.createElement("td",null),e.createElement("td",null,l.price.toFixed(2)),e.createElement("td",null,l.quantity),e.createElement("td",null,(l.price*l.quantity).toFixed(2)),e.createElement("td",null))),t.surchargesTotal>0?e.createElement("tr",{className:o},e.createElement("td",null),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,"Surcharges"),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,t.surchargesTotal.toFixed(2)),e.createElement("td",null)):null,t.grandTotal!==t.beforeTaxesTotal+t.surchargesTotal?e.createElement("tr",{className:o},e.createElement("td",null),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,"Taxes"),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,(t.grandTotal-t.surchargesTotal-t.beforeTaxesTotal).toFixed(2)),e.createElement("td",null)):null)))),e.createElement("div",{className:b},e.createElement("div",{className:x},"Surcharges"),e.createElement("div",null,i(S)),e.createElement("div",{className:x},"Taxes"),e.createElement("div",null,i(D)),e.createElement("div",{className:x},"Invoice Total"),e.createElement("div",null,i($)),e.createElement("div",{className:x},"Payments"),e.createElement("div",null,i(_)),e.createElement("div",{className:o}),e.createElement("div",{className:`${x} ${f} ${F}`},"Balance"),e.createElement("div",{className:`${f} ${F}`},i($+S+D-_))))};var D="styles_tableHeader__19C2k",S="styles_tableDivider__3Nio1",$="styles_total__r7B0h";d(".styles_tableHeader__19C2k {\n  background: #637381;\n  color: white;\n  padding: 8px;\n  font-weight: 500;\n  margin-bottom: 2px;\n}\n\n.styles_tableDivider__3Nio1 {\n  width: 100%;\n  height: 2px;\n  background: #dfe3e8;\n  margin: 8px 0;\n}\n\n.styles_total__r7B0h {\n  text-align: right;\n  font-weight: 500;\n  padding-right: 12px;\n  margin-bottom: 16px;\n}");const F=({logoUrl:t,physicalAddress:l,customer:n,order:c,payment:m,preview:d=!1})=>{const o=""+(d?y:"");let _;return _="creditCard"===m.paymentMethod?`${(e=>{switch(e){case"AMEX":return"American Express";case"BML":return"Bill Me Later";case"DNR":return"Diners";case"DSCV":return"Discover";case"JCB":return"Japan Credit Bureau";case"MC":return"MasterCard";case"RM":return"Revolution Money";case"TEL":return"Telecheck";case"UNKN":return"Unknown";case"VISA":return"Visa";case"VYGR":return"Voyager";case"WEX":return"Wright Express";default:return e}})(m.cardType)}•••• ${m.paymentIdentifier.slice(m.paymentIdentifier.length-4)}`:"check"===m.paymentMethod?"Check# "+m.paymentIdentifier:"Cash",e.createElement("div",{className:`${E} ${o}`},e.createElement("div",{className:p},t?e.createElement("img",{src:t,alt:"logo",className:`${h} ${o}`}):null,l&&s(l)?r(l):null),e.createElement("div",{className:N},e.createElement("div",null,e.createElement("div",{className:u},"Receipt For"),n.name),"byCustomer"!==n.invoiceConstruction&&c?e.createElement("div",null,e.createElement("div",{className:u},"Job Site"),r(c.jobSite)):null),e.createElement("div",{className:D},"Order Information"),e.createElement("table",{className:g},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Order#"),e.createElement("th",null,"Date"),e.createElement("th",null,"Service"),e.createElement("th",null,"Rate"),e.createElement("th",null,"Qty"),e.createElement("th",null,"Amount"),e.createElement("th",{className:v},"Total"))),e.createElement("tbody",null,c.services.map((t,l)=>0===l?e.createElement("tr",{key:l},e.createElement("td",null,c.id),e.createElement("td",null,a(c.serviceDate,"dd MMM, yyyy")),e.createElement("td",null,t.description),e.createElement("td",null,t.price.toFixed(2)),e.createElement("td",null,t.quantity),e.createElement("td",null,(t.price*t.quantity).toFixed(2)),e.createElement("td",{className:v},c.beforeTaxesTotal.toFixed(2))):e.createElement("tr",{key:l},e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,t.description),e.createElement("td",null,t.price.toFixed(2)),e.createElement("td",null,t.quantity),e.createElement("td",null,(t.price*t.quantity).toFixed(2)),e.createElement("td",null))),null!=c.surchargesTotal&&0!==c.surchargesTotal?e.createElement("tr",null,e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,"Surcharges"),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,c.surchargesTotal.toFixed(2)),e.createElement("td",null)):null,c.grandTotal!==c.beforeTaxesTotal?e.createElement("tr",null,e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,"Taxes"),e.createElement("td",null),e.createElement("td",null),e.createElement("td",null,(c.grandTotal-c.beforeTaxesTotal-(Number(c.surchargesTotal)||0)).toFixed(2)),e.createElement("td",null)):null)),e.createElement("div",{className:S}),e.createElement("div",{className:$},c.grandTotal),e.createElement("div",{className:D},"Order Payment"),e.createElement("table",{className:g},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Payment"),e.createElement("th",null,"Date"),e.createElement("th",null,"Transaction #"),e.createElement("th",{className:v},"Paid Amount,$"))),e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",null,_),e.createElement("td",null,a(m.date,"dd MMM, yyyy")),e.createElement("td",null,"creditCard"===m.paymentMethod?m.paymentRetRef:null),e.createElement("td",{className:v},i(m.amount,2))))),e.createElement("div",{className:S}),e.createElement("div",{className:$},i(m.amount,2)))},I=({transactions:t,settlementDate:l})=>e.createElement("div",{className:E},e.createElement("h1",null,"Сredit Card Settlements"),e.createElement("div",{className:_},a(l,"dd MMM, yyyy")," / ",t.length," Transactions"),e.createElement("table",{className:g},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Customer"),e.createElement("th",null,"Transaction Note"),e.createElement("th",{className:v},"Amount,$"),e.createElement("th",{className:v},"Fee,$"),e.createElement("th",{className:v},"Adjustment,$"),e.createElement("th",{className:v},"Net,$"))),e.createElement("tbody",null,t.map((t,l)=>{var n,a;return e.createElement("tr",{key:l,className:o},e.createElement("td",null,null!==(n=t.customerName)&&void 0!==n?n:"-"),e.createElement("td",null,null!==(a=t.transactionNote)&&void 0!==a?a:"-"),e.createElement("td",{className:v},i(t.amount)),e.createElement("td",{className:v},i(t.adjustment)),e.createElement("td",{className:v},i(t.fee)),e.createElement("td",{className:v},i(t.amount-t.fee-t.adjustment)))}))));var k="styles_invoiceInformation__2uDSi",C="styles_label__2P_0w",B="styles_subsField__zLzAq",A="styles_dateField__2yN7W",P="styles_quantityField__2EnD1",q="styles_title__1TWIY",U="styles_subtitle__2PrMf";d(".styles_invoiceInformation__2uDSi {\n  grid-column: 3/4;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  text-align: right;\n}\n.styles_invoiceInformation__2uDSi .styles_label__2P_0w {\n  font-weight: bold;\n  text-align: left;\n}\n\n.styles_subsField__zLzAq {\n  width: 130px;\n}\n\n.styles_dateField__2yN7W {\n  width: 140px;\n}\n\n.styles_quantityField__2EnD1 {\n  width: 20px;\n}\n\n.styles_title__1TWIY {\n  font-weight: bold;\n}\n\n.styles_subtitle__2PrMf {\n  font-weight: bold;\n  padding-left: 16px;\n}");const V=({payments:c,logoUrl:m,physicalAddress:d,customer:_,subscriptions:w,preview:T=!1})=>{const[M,D]=t(0),[S,$]=t(0),[F]=t(0),[I]=t(0);l(()=>{if(null==w?void 0:w.length){const e=w.map(e=>e.totalPriceForSubscription).reduce((e,t)=>e+t);$(e)}},[w]),l(()=>{D(S+F+I)},[S,F,I]);const V=""+(T?y:"");return e.createElement("div",{className:`${E} ${V}`},e.createElement("div",{className:p},m?e.createElement("img",{src:m,alt:"logo",className:`${h} ${V}`}):null,d&&s(d)?r(d):null),e.createElement("div",{className:N},e.createElement("div",null,e.createElement("div",{className:u},"Bill to"),r(_.billingAddress)),"byCustomer"!==_.invoiceConstruction?e.createElement("div",null,e.createElement("div",{className:u},"Job Site"),d&&s(d)?r(d):null):null,e.createElement("div",{className:k},e.createElement("div",{className:C},"Invoice Date"),e.createElement("div",null,a(new Date,"dd MMM, yyyy")),e.createElement("div",{className:C},"Due Date"),e.createElement("div",null,a(_.paymentTerms?(e=>{const t=new Date;switch(e){case"cod":return t;case"net15Days":return n(t,15);case"net30Days":return n(t,30);case"net60Days":return n(t,60)}})(_.paymentTerms):new Date,"dd MMM, yyyy")),_.paymentTerms?e.createElement(e.Fragment,null,e.createElement("div",{className:C},"Payment Terms"),e.createElement("div",null,(e=>{switch(e){case"cod":return"COD";case"net15Days":return"Net 15";case"net30Days":return"Net 30";case"net60Days":return"Net 60"}})(_.paymentTerms))):null)),e.createElement("table",{className:g},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{className:B},"Subscription#"),e.createElement("th",{className:A},"Date / Billing Period"),e.createElement("th",null,"Billable Item"),e.createElement("th",null,"Rate"),e.createElement("th",{className:P},"Qty"),e.createElement("th",{className:v},"Amount"))),e.createElement("tbody",null,null==w?void 0:w.map((t,l)=>e.createElement(e.Fragment,{key:t.id},e.createElement("tr",{key:l},e.createElement("td",{className:q},"Subscription #"+t.id),e.createElement("td",null,`${a(t.nextBillingPeriodFrom,"dd MMM, yyyy")}-${a(t.nextBillingPeriodTo,"dd MMM, yyyy")}`),e.createElement("td",null,t.serviceItems[0].billableService.description),e.createElement("td",null,i(t.serviceItems[0].price)),e.createElement("td",{className:P},t.serviceItems[0].quantity),e.createElement("td",{className:v},i(t.totalPriceForSubscription))),t.serviceItems[0].lineItems.length?e.createElement(e.Fragment,null,e.createElement("tr",null,e.createElement("td",{className:U},"Line Items")),t.serviceItems[0].lineItems.map((l,n)=>e.createElement("tr",{key:n},e.createElement("td",null),e.createElement("td",null,`${a(t.nextBillingPeriodFrom,"dd MMM, yyyy")}-${a(t.nextBillingPeriodTo,"dd MMM, yyyy")}`),e.createElement("td",null),e.createElement("td",null,i(l.price)),e.createElement("td",{className:P},l.quantity),e.createElement("td",{className:v},i(l.quantity*l.price))))):null,t.serviceItems[0].subscriptionOrders.length?e.createElement(e.Fragment,null,e.createElement("tr",null,e.createElement("td",{className:U}," Subscriptions Orders")),t.serviceItems[0].subscriptionOrders.map((t,l)=>e.createElement("tr",{key:l},e.createElement("td",{className:B},"Subscription Order #"+t.sequenceId)))):null)))),e.createElement("div",{className:b},e.createElement("div",{className:x},"Surcharges"),e.createElement("div",null,i(I)),e.createElement("div",{className:x},"Taxes"),e.createElement("div",null,i(F)),e.createElement("div",{className:x},"Invoice Total"),e.createElement("div",null,i(S)),e.createElement("div",{className:x},"Payments"),e.createElement("div",null,i(c)),e.createElement("div",{className:o}),e.createElement("div",{className:`${x} ${f} ${V}`},"Balance"),e.createElement("div",{className:`${f} ${V}`},i(M))))};export{M as InvoiceBuilder,F as ReceiptBuilder,I as SettlementBuilder,V as SubscriptionInvoiceBuilder};
