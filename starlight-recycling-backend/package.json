{
  "name": "starlight-recycling-backend",
  "version": "1.0.0",
  "description": "",
  "repository": "https://github.com/Starlightpro/starlight-recycling-backend",
  "scripts": {
    "start": "npm run run-dist",
    "server": "ts-node src/server.ts",
    "build": "tsc",
    "run-dist": "node ./dist/src/index.js",
    "dev": "ts-node-dev --files src/index.ts",
    "dev:watch": "ts-node-dev --respawn src/server.ts",
    "dev:start-workers": "ts-node-dev --respawn src/workers.ts",
    "dev:all": "concurrently 'yarn dev:watch' 'yarn dev:start-workers'",
    "jest:node": "jest --detectOpenHandles --runInBand --unhandled-rejections=strict --forceExit",
    "test": "npm run jest:node",
    "precommit": "lint-staged && yarn lint:tsc",
    "lint": "yarn lint:eslint && yarn lint:tsc",
    "lint:eslint": "eslint --ext js,ts,tsx src",
    "lint:tsc": "tsc -p tsconfig.json --noEmit",
    "generate-schema": "ts-node ./scripts/generate-schema.ts",
    "generate-keys": "ts-node ./scripts/generate-keys.ts",
    "create-service-key": "ts-node ./scripts/create-service-key.ts",
    "migration:run": "npm-run-all \"migration:run:**\"",
    "migration:run:recycling": "cross-env TYPEORM_SCHEMA=\"srn:starlight:recycling:1\" TYPEORM_ENTITIES=\"src/modules/recycling/entities/**/!(*.spec.ts)\" TYPEORM_MIGRATIONS=\"src/modules/recycling/migrations/**/!(*.spec.ts)\" ./scripts/cli.ts migration:tenant:run -t each",
    "migration:create:recycling": "./scripts/cli.ts migration:tenant:create -d ./src/modules/recycling/migrations -n",
    "migration:generate": "npm-run-all \"migration:generate:** {1}\" --",
    "migration:generate:recycling": "cross-env TYPEORM_SCHEMA=\"srn:starlight:recycling:1\" TYPEORM_ENTITIES=\"src/modules/recycling/entities/**/!(*.spec.ts)\" ./scripts/cli.ts migration:tenant:generate -d ./src/modules/recycling/migrations -n",
    "migration:revert": "npm-run-all \"migration:revert:**\"",
    "migration:revert:recycling": "cross-env TYPEORM_SCHEMA=\"srn:starlight:recycling:1\" TYPEORM_ENTITIES=\"src/modules/recycling/entities/**/!(*.spec.ts)\" TYPEORM_MIGRATIONS=\"src/modules/recycling/migrations/**/!(*.spec.ts)\" ./scripts/cli.ts migration:tenant:revert -t each",
    "seed:run": "ts-node ./node_modules/typeorm-seeding/dist/cli.js seed",
    "squash": "ts-node ./scripts/squashMigrations.ts",
    "generate-service-keys": "ts-node ./scripts/generate-service-keys.ts",
    "pre:schema:generate:billing": "aws s3 cp s3://starlight-schemas/billing-schema-dev1-core.gql billing-schema.gql",
    "schema:generate:billing": "cd ./codegen-plugins && tsc && cd .. && gql-gen -r dotenv/config --config src/services/billing/graphql/codegen.yml",
    "execute-worker": "ts-node ./scripts/executeWorker.ts",
    "elastic:sync-tenant": "yarn execute-worker populate-entity",
    "elastic:sync-all": "yarn execute-worker populate-elastic-search-index"
  },
  "license": "ISC",
  "dependencies": {
    "@apollo/federation": "^0.25.2",
    "@apollo/gateway": "^0.30.0",
    "@elastic/elasticsearch": "^7.8.0",
    "@graphql-codegen/cli": "^1.21.3",
    "@graphql-codegen/plugin-helpers": "^1.18.4",
    "@graphql-codegen/typescript-graphql-request": "^3.1.0",
    "@graphql-codegen/typescript-operations": "^1.17.15",
    "@graphql-codegen/typescript-type-graphql": "^1.18.3",
    "@graphql-codegen/visitor-plugin-common": "^1.19.1",
    "@koa/cors": "^2.2.3",
    "@mapbox/mapbox-gl-geocoder": "^4.6.0",
    "@mapbox/mapbox-sdk": "^0.11.0",
    "@sendgrid/mail": "^7.2.0",
    "@sentry/node": "^6.19.6",
    "@types/amqplib": "^0.5.13",
    "@types/bull-board": "^0.6.0",
    "@types/elasticsearch": "^5.0.37",
    "@types/faker": "^4.1.12",
    "@types/geojson": "^7946.0.7",
    "@types/graphql-upload": "^8.0.4",
    "@types/ioredis": "^4.16.3",
    "@types/jest": "26.0.0",
    "@types/jsonwebtoken": "^8.5.0",
    "@types/koa-mount": "^4.0.0",
    "@types/koa-pino-logger": "^2.1.6",
    "@types/koa-static": "^4.0.1",
    "@types/mapbox-gl": "^2.1.2",
    "@types/mapbox__mapbox-sdk": "^0.11.1",
    "@types/pino": "^6.0.1",
    "@types/uuid": "^8.0.0",
    "@types/ws": "^8.2.2",
    "amqplib": "^0.6.0",
    "apollo-server": "^2.19.0",
    "apollo-server-koa": "^3.0.0-alpha.3",
    "aws-sdk": "^2.756.0",
    "axios": "^0.19.2",
    "bodybuilder": "^2.4.0",
    "bull-board": "1.0.0-alpha.11",
    "bullmq": "^1.10.0",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.12.2",
    "cloudinary": "^1.23.0",
    "convert-units": "^3.0.0-beta.2",
    "cross-env": "^7.0.2",
    "dd-trace": "^2.5.0",
    "dotenv": "^8.2.0",
    "geojson": "^0.5.0",
    "graphql": "^15.3.0",
    "graphql-upload": "^11.0.0",
    "http-graceful-shutdown": "^2.3.2",
    "http-status": "^1.4.2",
    "husky": "^4.2.5",
    "ioredis": "^4.17.3",
    "jest": "26.0.1",
    "jsonwebtoken": "^8.5.1",
    "koa": "^2.11.0",
    "koa-bodyparser": "^4.3.0",
    "koa-conditional-get": "^2.0.0",
    "koa-etag": "^3.0.0",
    "koa-helmet": "^5.2.0",
    "koa-json": "^2.0.2",
    "koa-mount": "^4.0.0",
    "koa-pino-logger": "^3.0.0",
    "koa-router": "^8.0.8",
    "koa-static": "^5.0.0",
    "lint-staged": "^10.2.11",
    "lodash": "^4.17.15",
    "make-dir": "^3.1.0",
    "mapbox": "^1.0.0-beta10",
    "mapbox-gl": "^1.11.1",
    "moment": "^2.29.0",
    "moment-timezone": "^0.5.31",
    "npm-run-all": "^4.1.5",
    "oidc-provider": "^6.26.0",
    "paseto": "^1.0.8",
    "pg": "^8.2.0",
    "pino": "^6.2.1",
    "pino-pretty": "^4.0.0",
    "reflect-metadata": "^0.1.13",
    "rxjs": "^6.6.2",
    "supertest": "^4.0.2",
    "type-graphql": "^1.0.0",
    "typeorm": "^0.2.29",
    "typeorm-seeding": "^1.6.1",
    "ws": "^8.5.0",
    "xmlhttprequest": "^1.8.0",
    "yup": "^0.32.8"
  },
  "devDependencies": {
    "@graphql-codegen/typescript": "^1.21.1",
    "@types/graphql": "^14.5.0",
    "@types/koa": "^2.11.2",
    "@types/koa-conditional-get": "^2.0.0",
    "@types/koa-etag": "^3.0.0",
    "@types/koa-helmet": "^3.1.2",
    "@types/koa-json": "^2.0.18",
    "@types/koa-router": "^7.4.0",
    "@types/lodash": "^4.14.149",
    "@types/node": "^12.12.31",
    "@types/type-is": "^1.6.3",
    "@typescript-eslint/eslint-plugin": "^4.7.0",
    "@typescript-eslint/parser": "^4.7.0",
    "concurrently": "^6.2.0",
    "eslint": "^7.13.0",
    "eslint-config-prettier": "^6.15.0",
    "eslint-plugin-prettier": "^3.1.4",
    "prettier": "^2.1.2",
    "ts-jest": "26.1.0",
    "ts-node-dev": "^1.1.8",
    "typescript": "^4.3.5"
  },
  "lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json}": [
      "eslint --ext js,ts,tsx --fix",
      "prettier --single-quote --write",
      "cross-env NODE_ENV=test jest --bail --findRelatedTests --detectOpenHandles --unhandled-rejections=strict --forceExit"
    ]
  },
  "husky": {
    "hooks": {
      "pre-commit": "yarn precommit"
    }
  },
  "jest": {
    "moduleFileExtensions": [
      "js",
      "jsx",
      "json",
      "ts",
      "tsx"
    ],
    "collectCoverage": false,
    "collectCoverageFrom": [
      "**/*.{ts,js}",
      "!**/node_modules/**",
      "!**/build/**",
      "!**/coverage/**"
    ],
    "transform": {
      "\\.ts$": "ts-jest"
    },
    "coverageThreshold": {
      "global": {
        "branches": 100,
        "functions": 100,
        "lines": 100,
        "statements": 100
      }
    },
    "coverageReporters": [
      "text",
      "text-summary"
    ],
    "testRegex": "(/__tests__/.*|(\\.|/)(test|spec))\\.(js|ts)x?$",
    "testPathIgnorePatterns": [
      "/node_modules/",
      "/build/",
      "/coverage/"
    ]
  }
}
