{"code":"import React, { useCallback, useRef, useState } from 'react';\r\nimport cx from 'classnames';\r\nimport { useFormikContext } from 'formik';\r\nimport { capitalize, isEmpty, trim, xor } from 'lodash-es';\r\nimport { Layouts } from \"../../layouts\";\r\nimport { FormInput } from \"../FormInput/FormInput\";\r\nimport { Typography } from \"../Typography/Typography\";\r\nimport styles from \"./css/styles.scss\";\r\nconst maxLength = 5;\r\nexport const MultiInput = ({ className, name, placeholder, borderless, error, noError, wrapperClassName, disabled: propsDisabled, label, searchValue, entity, validationRule, onChange, values = [], id = name, }) => {\r\n    const formikContext = useFormikContext();\r\n    const [search, setSearch] = useState(searchValue);\r\n    const inputRef = useRef(null);\r\n    const handleBlur = useCallback((e) => {\r\n        const value = e.target.value;\r\n        const parsed = value.split(new RegExp(/,|;/));\r\n        const entities = new Set([...parsed]);\r\n        const validEntities = [...entities].filter(entity => validationRule(entity));\r\n        let newSearch = value;\r\n        const valuesLength = values.length;\r\n        const validEntitiesLength = validEntities.length;\r\n        const count = maxLength > valuesLength ? maxLength - valuesLength : 0;\r\n        if (validEntitiesLength > 0) {\r\n            const limitedEntities = validEntities.slice(0, count);\r\n            onChange(name, [...values, ...limitedEntities]);\r\n            newSearch = trim(value.replace(new RegExp(limitedEntities.join('(;|,)|'), 'gi'), ''), ',;');\r\n        }\r\n        setSearch(newSearch);\r\n        if (formikContext) {\r\n            if (validEntitiesLength > count) {\r\n                formikContext.setFieldError(name, newSearch\r\n                    ? `${entity ? ` ${capitalize(entity)}` : ''} quantity should not be greater than ${maxLength}`\r\n                    : '');\r\n            }\r\n            else {\r\n                formikContext.setFieldError(name, newSearch ? `Wrong${entity ? ` ${entity}` : ''} format` : '');\r\n            }\r\n        }\r\n    }, [entity, formikContext, name, onChange, validationRule, values]);\r\n    const handleSearch = useCallback((e) => {\r\n        setSearch(e.target.value);\r\n    }, []);\r\n    const handleContainerClick = useCallback(() => {\r\n        var _a;\r\n        if (formikContext) {\r\n            const { setFieldError } = formikContext;\r\n            setFieldError(name, undefined);\r\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\r\n        }\r\n    }, [formikContext, name]);\r\n    const handleClear = useCallback((e, items) => {\r\n        e.stopPropagation();\r\n        onChange(name, xor(values, items));\r\n    }, [onChange, name, values]);\r\n    return (React.createElement(\"div\", { className: cx(styles.wrapper, wrapperClassName) },\r\n        label ? (React.createElement(Layouts.Margin, { top: \"0.5\", bottom: \"0.5\" },\r\n            React.createElement(Typography, { color: \"secondary\", as: \"label\", shade: \"desaturated\", variant: \"bodyMedium\", htmlFor: id }, label))) : null,\r\n        React.createElement(\"div\", { className: cx(styles.container, className), onClick: handleContainerClick },\r\n            React.createElement(FormInput, { name: name, className: cx(styles.input, { [styles.fullWidth]: !values.length }), disabled: propsDisabled, wrapClassName: cx(styles.control, {\r\n                    [styles.error]: error,\r\n                    [styles.borderless]: borderless,\r\n                    [styles.disabled]: propsDisabled,\r\n                    [styles.placeholder]: !search,\r\n                }), onChange: handleSearch, onBlur: handleBlur, autoComplete: \"off\", value: search, placeholder: isEmpty(values) ? placeholder : undefined, noError: true, reverse: true },\r\n                values.map(option => (React.createElement(\"span\", { key: `${name}-${option}`, className: styles.multiLabel },\r\n                    option,\r\n                    React.createElement(\"span\", { className: cx(styles.icon, styles.cross), onClick: e => handleClear(e, [option]) }, \"\\u2715\")))),\r\n                React.createElement(\"div\", { className: styles.controls },\r\n                    React.createElement(\"span\", { className: cx(styles.icon, styles.cross), onClick: e => handleClear(e, values) }, \"\\u2715\")))),\r\n        !noError ? (React.createElement(\"div\", { \"data-error\": error, className: styles.validationText, role: \"alert\" }, error)) : null));\r\n};\r\n//# sourceMappingURL=MultiInput.js.map","references":["/Users/wilson/Documents/Starlight/starlight-shared-libs/node_modules/@types/react/index.d.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/node_modules/classnames/index.d.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/node_modules/formik/dist/index.d.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/node_modules/@types/lodash-es/index.d.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/src/layouts/index.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/src/common/FormInput/FormInput.tsx","/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/src/common/Typography/Typography.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/src/common/MultiInput/types.ts","/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/src/common/MultiInput/css/styles.scss.d.ts"],"map":"{\"version\":3,\"file\":\"MultiInput.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/common/MultiInput/MultiInput.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/wilson/Documents/Starlight/starlight-shared-libs/packages/shared-components/build/common/MultiInput/MultiInput.d.ts","writeByteOrderMark":false,"text":"import React from 'react';\r\nimport { IMultiInput } from \"./types\";\r\nexport declare const MultiInput: React.FC<IMultiInput>;\r\n"}}
